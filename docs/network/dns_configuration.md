
https://blog.csdn.net/superjunenaruto/article/details/105495183　# 参考

# 安装配置
apt install resolvconf

# 使配置生效
sudo resolvconf -u

# 查看dns状态
systemd-resolve --status

sudo service networking restart #使网卡配置生效
sudo service resolvconf restart #使DNS生效

systemd-resolve baidu.com

全局配置文件(/etc/systemd/resolved.conf)
针对单个连接的静态配置文件(/etc/systemd/network/*.network)(当使用 systemd-networkd.service(8) 管理网络时)
针对单个连接的动态配置(从DHCP服务器、resolvectl(1)、其他系统服务得到的DNS服务器)。

# 配置客户端

# /etc/resolvconf/resolv.conf.d/tail 
# /etc/resolvconf/resolv.conf.d/head
nameserver 10.128.180.22

# /etc/resolvconf/resolv.conf.d/base
search hq.ta-mp.com tct.com

sudo resolvconf -u
sudo /etc/init.d/networking restart

Output
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
search tct.com
nameserver 10.128.180.22

# --------------------------------------------------------------------------------------------------

systemd-resolve的配置

这个修改的是全局的DNS

vim /etc/systemd/resolved.conf
DNS=223.5.5.5
DNS=80.80.80.80
DNS=2400:3200::1
DNS=2606:4700:4700::1111


重启服务
service systemd-resolved restart

查看DNS的状态：
systemd-resolve --status
